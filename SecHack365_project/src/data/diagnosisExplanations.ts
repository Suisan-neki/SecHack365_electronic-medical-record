/**
 * 診断別の詳細説明データベース
 * 患者端末で自動表示される情報
 */

export interface DiagnosisExplanation {
  diagnosisName: string;
  patientFriendlyName: string;
  simpleExplanation: string;
  detailedExplanation: string;
  commonSymptoms: string[];
  treatmentFlow: string[];
  expectedCourse: string;
  lifestyle: {
    food: string[];
    exercise: string[];
    avoid: string[];
    dailyLife: string[];
  };
  faq: Array<{
    question: string;
    answer: string;
  }>;
}

export const diagnosisExplanations: Record<string, DiagnosisExplanation> = {
  '風邪': {
    diagnosisName: '風邪',
    patientFriendlyName: 'かぜ',
    simpleExplanation: '鼻やのどの粘膜にウイルスが感染して起こる、最も身近な病気です。',
    detailedExplanation: '風邪（かぜ症候群）は、主にウイルスが鼻やのどの粘膜に感染することで起こる病気です。ウイルスは200種類以上あり、完全に予防することは難しいですが、適切な治療と休養で通常3-5日程度で回復します。',
    commonSymptoms: [
      'のどの痛み',
      '鼻水・鼻づまり',
      '咳',
      '発熱（微熱～38度程度）',
      '頭痛',
      'くしゃみ',
      '全身のだるさ'
    ],
    treatmentFlow: [
      '1. 診察と診断',
      '2. 解熱剤や咳止めなどの対症療法の処方',
      '3. 十分な休養と水分補給',
      '4. 通常3-5日で症状が改善',
      '5. 症状が続く場合は再診'
    ],
    expectedCourse: '通常、3-5日程度で症状が改善します。発熱は2-3日、のどの痛みは3-4日、咳は1週間程度続くことがあります。症状が悪化したり、1週間以上続く場合は、別の病気の可能性もあるため、再度受診してください。',
    lifestyle: {
      food: [
        '消化の良いものを食べる（おかゆ、うどんなど）',
        '温かいスープや飲み物で水分補給',
        'ビタミンCを多く含む果物（みかん、いちごなど）',
        '栄養バランスの取れた食事'
      ],
      exercise: [
        '激しい運動は避ける',
        '軽いストレッチ程度に留める',
        '体力が回復してから徐々に運動を再開'
      ],
      avoid: [
        '無理をして仕事や学校に行くこと',
        '長時間の外出',
        'アルコールやタバコ',
        '冷たい飲み物の過剰摂取',
        '睡眠不足'
      ],
      dailyLife: [
        '十分な睡眠と休養を取る（1日8時間以上）',
        'こまめに水分補給（1日1.5-2リットル）',
        '部屋を加湿する（湿度50-60%）',
        'うがい、手洗いを続ける',
        '他の人にうつさないようマスクを着用'
      ]
    },
    faq: [
      {
        question: 'お風呂に入っても大丈夫ですか？',
        answer: '熱が高くなければ、短時間のシャワーや入浴は問題ありません。ただし、高熱がある場合や体がだるい時は、無理せず体を拭く程度にしてください。'
      },
      {
        question: '仕事や学校にはいつから行けますか？',
        answer: '熱が下がってから24時間以上経過し、咳や鼻水などの症状が軽くなってからが目安です。他の人にうつす可能性があるため、症状がある間は休むことをお勧めします。'
      },
      {
        question: '薬はいつまで飲めばいいですか？',
        answer: '処方された日数分、すべて飲み切ってください。症状が良くなっても、途中で薬をやめないようにしましょう。'
      },
      {
        question: '症状が悪化した場合はどうすればいいですか？',
        answer: '高熱が続く（38.5度以上が3日以上）、呼吸が苦しい、強い頭痛や胸痛がある場合は、すぐに医療機関を受診してください。'
      }
    ]
  },
  'インフルエンザ(A型)': {
    diagnosisName: 'インフルエンザ(A型)',
    patientFriendlyName: 'インフルエンザ',
    simpleExplanation: 'インフルエンザウイルスによる感染症で、風邪よりも症状が強く出る病気です。',
    detailedExplanation: 'インフルエンザは、インフルエンザウイルスに感染することで起こる病気です。A型は最も一般的で、毎年冬に流行します。風邪と似た症状ですが、高熱や全身の強い症状が特徴的です。',
    commonSymptoms: [
      '突然の高熱（38度以上）',
      '全身の倦怠感',
      '筋肉痛・関節痛',
      '頭痛',
      '咳・のどの痛み',
      '鼻水・鼻づまり',
      '悪寒'
    ],
    treatmentFlow: [
      '1. 診察と迅速検査（鼻やのどの検査）',
      '2. 抗インフルエンザ薬の処方（発症48時間以内が効果的）',
      '3. 解熱剤などの対症療法',
      '4. 十分な休養と水分補給',
      '5. 通常5-7日で症状が改善',
      '6. 熱が下がっても2日間は安静に'
    ],
    expectedCourse: '適切な治療を受ければ、通常5-7日程度で回復します。発熱は3-4日、全身症状は5-6日程度続くことがあります。熱が下がった後も、他の人にうつす可能性があるため、2日間は安静にしてください。',
    lifestyle: {
      food: [
        '消化の良い温かいもの（おかゆ、煮込みうどんなど）',
        '水分を十分に補給（スポーツドリンク、お茶、スープ）',
        '栄養価の高い食べ物（卵、豆腐、バナナなど）',
        '食欲がない時は無理に食べない'
      ],
      exercise: [
        '完全に回復するまで運動は禁止',
        '熱が下がっても2-3日は安静に',
        '回復後も1週間程度は激しい運動を避ける'
      ],
      avoid: [
        '無理をして外出すること',
        '他の人との接触（感染を広げる）',
        'アルコール',
        '熱いお風呂（体力を消耗する）',
        '睡眠不足'
      ],
      dailyLife: [
        '十分な睡眠（1日10時間以上）',
        'こまめな水分補給（1日2リットル以上）',
        '部屋の加湿（湿度50-60%）',
        '定期的な換気',
        '家族にうつさないようマスク着用',
        '手洗い・うがいの徹底'
      ]
    },
    faq: [
      {
        question: 'タミフルはいつから効きますか？',
        answer: 'タミフルは発症後48時間以内に服用すると効果的です。通常、服用開始から1-2日で症状が軽くなり始めます。処方された5日分は必ず飲み切ってください。'
      },
      {
        question: '家族にうつさないためにはどうすればいいですか？',
        answer: 'マスクの着用、別室での隔離、タオルや食器の共用を避ける、こまめな換気と手洗いが重要です。熱が下がってから2日間は特に注意してください。'
      },
      {
        question: 'いつから学校や仕事に行けますか？',
        answer: '発症後5日間、かつ解熱後2日間（幼児は3日間）が経過するまでは出席停止です。医師の許可が出るまで自宅で療養してください。'
      },
      {
        question: '予防接種を受けていたのにかかったのはなぜですか？',
        answer: 'インフルエンザワクチンは100%の予防効果ではありませんが、重症化を防ぐ効果があります。予防接種を受けていても感染することはありますが、症状が軽く済むことが多いです。'
      },
      {
        question: 'こんな症状があったらすぐ受診すべきですか？',
        answer: '呼吸困難、意識がもうろうとする、けいれん、嘔吐が続く、水分が取れない、などの症状がある場合は、すぐに医療機関を受診してください。'
      }
    ]
  },
  '高血圧': {
    diagnosisName: '高血圧',
    patientFriendlyName: '高血圧症',
    simpleExplanation: '血圧が正常よりも高い状態が続く病気です。',
    detailedExplanation: '高血圧は、心臓から送り出される血液の圧力が高い状態が続く病気です。自覚症状がほとんどないため「サイレントキラー」とも呼ばれ、放置すると心筋梗塞や脳卒中のリスクが高まります。',
    commonSymptoms: [
      '自覚症状はほとんどない',
      '頭痛（まれ）',
      'めまい（まれ）',
      '動悸（まれ）',
      '肩こり（まれ）'
    ],
    treatmentFlow: [
      '1. 血圧測定と診断',
      '2. 生活習慣の改善（食事・運動）',
      '3. 降圧薬の処方（必要な場合）',
      '4. 定期的な血圧測定',
      '5. 月1回程度の通院',
      '6. 長期的な管理'
    ],
    expectedCourse: '高血圧は長期的な管理が必要な病気です。適切な治療と生活習慣の改善により、血圧をコントロールし、合併症のリスクを減らすことができます。',
    lifestyle: {
      food: [
        '塩分を控える（1日6g未満）',
        '野菜や果物を多く摂る',
        '減量（肥満の場合）',
        'カリウムを多く含む食品（バナナ、ほうれん草など）',
        '飽和脂肪酸を控える'
      ],
      exercise: [
        '有酸素運動（ウォーキング、水泳など）',
        '週3-5回、1回30分程度',
        '無理のない範囲で継続',
        '激しい運動は医師と相談'
      ],
      avoid: [
        '塩分の多い食品（ラーメン、漬物など）',
        '過度な飲酒',
        'タバコ',
        'ストレス',
        '睡眠不足'
      ],
      dailyLife: [
        '毎日同じ時間に血圧を測定',
        '規則正しい生活',
        '十分な睡眠（7-8時間）',
        'ストレス管理',
        '定期的な通院と服薬'
      ]
    },
    faq: [
      {
        question: '薬は一生飲み続けなければいけませんか？',
        answer: '生活習慣の改善により血圧が安定すれば、医師の判断で薬を減らしたり中止したりできる場合があります。ただし、自己判断で中止しないでください。'
      },
      {
        question: '塩分を控えるコツはありますか？',
        answer: '調味料を減らす、薄味に慣れる、香辛料やハーブで風味をつける、加工食品を避ける、などが効果的です。'
      },
      {
        question: '血圧はどれくらいの頻度で測ればいいですか？',
        answer: '朝と夜の1日2回、毎日同じ時間に測定するのが理想的です。記録をつけて、診察時に医師に見せてください。'
      }
    ]
  },
  '糖尿病': {
    diagnosisName: '糖尿病',
    patientFriendlyName: '糖尿病',
    simpleExplanation: '血液中の糖分（血糖値）が高い状態が続く病気です。',
    detailedExplanation: '糖尿病は、インスリンの働きが不足して血糖値が高くなる病気です。放置すると、目、腎臓、神経などに合併症を起こす可能性があります。適切な治療と生活習慣の改善で、健康な人と変わらない生活を送ることができます。',
    commonSymptoms: [
      '喉が渇く',
      'トイレが近い（多尿）',
      '体重が減る',
      '疲れやすい',
      '傷が治りにくい',
      '視力の低下'
    ],
    treatmentFlow: [
      '1. 血糖値測定と診断',
      '2. 食事療法の開始',
      '3. 運動療法の開始',
      '4. 血糖降下薬またはインスリンの処方（必要な場合）',
      '5. 定期的な血糖値測定',
      '6. 月1回程度の通院'
    ],
    expectedCourse: '糖尿病は完治する病気ではありませんが、適切な管理により合併症を防ぎ、健康な生活を送ることができます。長期的な付き合いが必要な病気です。',
    lifestyle: {
      food: [
        '規則正しく3食食べる',
        '腹八分目を心がける',
        '野菜を先に食べる',
        '糖質の取りすぎに注意',
        '食物繊維を多く摂る'
      ],
      exercise: [
        '有酸素運動（ウォーキングなど）',
        '週3-5回、1回30分程度',
        '食後1-2時間後の運動が効果的',
        '低血糖に注意'
      ],
      avoid: [
        '甘い飲み物やお菓子',
        '過食',
        '不規則な食事時間',
        'アルコールの過剰摂取',
        '喫煙'
      ],
      dailyLife: [
        '毎日決まった時間に血糖値を測定',
        '足のケア（傷がないか確認）',
        '定期的な眼科検診',
        'ストレス管理',
        '服薬の継続'
      ]
    },
    faq: [
      {
        question: '低血糖になったらどうすればいいですか？',
        answer: '冷や汗、手の震え、動悸などの症状があれば、すぐにブドウ糖やジュース（砂糖入り）を摂取してください。15分後に症状が改善しなければ、再度摂取します。'
      },
      {
        question: '外食する時の注意点は？',
        answer: '定食よりも単品を選び、野菜を多めに、ご飯は少なめにしましょう。ソースやドレッシングは別添えにして、量を調整してください。'
      },
      {
        question: '合併症を防ぐにはどうすればいいですか？',
        answer: '血糖値を適切にコントロールすること、定期的な検診を受けること、足のケアを怠らないこと、禁煙することが重要です。'
      }
    ]
  }
};

/**
 * 診断名から詳細説明を取得
 */
export const getDiagnosisExplanation = (diagnosisName: string): DiagnosisExplanation | null => {
  // 完全一致
  if (diagnosisExplanations[diagnosisName]) {
    return diagnosisExplanations[diagnosisName];
  }
  
  // 部分一致
  for (const [key, value] of Object.entries(diagnosisExplanations)) {
    if (diagnosisName.includes(key) || key.includes(diagnosisName)) {
      return value;
    }
  }
  
  return null;
};
